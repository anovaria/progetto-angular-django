{% extends 'importelab/report_base.html' %}
{% block report_body %}

<div class="section">
  <div class="small"><strong>Data Agg.:</strong> {{ data_agg|default:"" }}</div>
</div>

{% regroup rows by codfo as codfo_groups %}
{% for cg in codfo_groups %}
  <div class="section">
    <div class="small mono">
      <strong>CodFo:</strong> {{ cg.grouper|default:"" }}
      {% if cg.list and cg.list.0.descrccom %} — {{ cg.list.0.descrccom }}{% endif %}
    </div>
  </div>

  {% for row in cg.list %}
    <div class="rowblock">
      <div class="kv small mono">
        <div><strong>CodArticolo</strong> {{ row.codart|default:"" }}</div>
        <div><strong>CodArtFo</strong> {{ row.cod_art_fo|default:"" }}</div>
        <div><strong>STATO</strong> {{ row.stato|default:"" }}</div>
      </div>
      <div class="small" style="margin-top:6px;"><strong>Descrizione Art</strong> {{ row.descrizione_articolo|default:"" }}</div>

      <table class="table-mini" style="width:100%; margin-top:10px; border-collapse:collapse;">
        <thead>
          <tr>
            <th style="text-align:left; padding:6px 4px;"></th>
            <th style="text-align:center; padding:6px 4px;">CIDAC</th>
            <th style="text-align:center; padding:6px 4px;"></th>
            <th style="text-align:center; padding:6px 4px;">ROX</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:4px;">Pezzi X Cartone</td>
            <td class="center"><span class="box mono">{{ row.pzxcrt|default:"" }}</span></td>
            <td class="center mono">{{ row.agg_pz_x_crt|default:"" }} —&gt;</td>
            <td class="center"><span class="box mono">{{ row.r_pz_x_crt|default:"" }}</span></td>
          </tr>
          <tr>
            <td style="padding:4px;">Cartoni X strato</td>
            <td class="center"><span class="box mono">{{ row.strato|default:"" }}</span></td>
            <td class="center mono">{{ row.agg_crt_x_str|default:"" }} —&gt;</td>
            <td class="center"><span class="box mono">{{ row.r_crt_x_str|default:"" }}</span></td>
          </tr>
          <tr>
            <td style="padding:4px;">Strato X Pallet</td>
            <td class="center"><span class="box mono">{{ row.pallet|default:"" }}</span></td>
            <td class="center mono">{{ row.agg_str_x_plt|default:"" }} —&gt;</td>
            <td class="center"><span class="box mono">{{ row.r_str_x_plt|default:"" }}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  {% endfor %}
{% endfor %}

{% endblock %}
